{"version":3,"sources":["../src/index.js"],"names":["MarkdownNavbar","props","scrollTop","window","pageYOffset","document","documentElement","body","newHeadingList","_getHeadingList","map","h","distanceToTop","Math","abs","headingTopOffset","offsetTop","distanceList","minDistance","min","curHeading","find","updateHashAuto","_updateHash","dataId","onHashChange","setState","currentListNo","listNo","state","addTargetTimeout","clearTimeout","setTimeout","_initheadingsId","addEventListener","_winScroll","scrollTimeout","removeEventListener","contentWithoutCode","source","replace","pattOfTitle","matchResult","match","navData","r","i","index","level","length","text","levelCount","filter","startLevel","startLevelCount","forEach","t","toString","w","$1","$2","parseInt","result","nav","indexOf","target","querySelector","scrollTo","_getNavStructure","headings","querySelectorAll","curheading","Array","prototype","slice","apply","innerText","dataset","id","declarative","headingId","location","hash","trim","_scrollToTarget","headingList","push","value","history","replaceState","pathname","search","tBlocks","cls","evt","currentHash","onNavChange","random","substring","ordered","className","Component","PropTypes","string","bool","number","func"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nexport class MarkdownNavbar extends Component {\n  static propTypes = {\n    source: PropTypes.string,\n    ordered: PropTypes.bool,\n    headingTopOffset: PropTypes.number,\n    updateHashAuto: PropTypes.bool,\n    declarative: PropTypes.bool,\n    className: PropTypes.string,\n    onNavChange: PropTypes.func,\n    onHashChange: PropTypes.func,\n  };\n\n  static defaultProps = {\n    source: '',\n    ordered: true,\n    headingTopOffset: 0,\n    updateHashAuto: true,\n    declarative: false,\n    className: '',\n    onNavChange: () => {},\n    onHashChange: () => {},\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentListNo: '',\n    };\n  }\n\n  componentWillReceiveProps() {\n    if (this.addTargetTimeout) {\n      clearTimeout(this.addTargetTimeout);\n    }\n    this.addTargetTimeout = setTimeout(() => {\n      this._initheadingsId();\n      document.addEventListener('scroll', this._winScroll, false);\n    }, 1e3);\n  }\n\n  componentWillUnmount() {\n    if (this.addTargetTimeout) {\n      clearTimeout(this.addTargetTimeout);\n    }\n    if (this.scrollTimeout) {\n      clearTimeout(this.scrollTimeout);\n    }\n    document.removeEventListener('scroll', this._winScroll, false);\n  }\n\n  _getNavStructure() {\n    const contentWithoutCode = this.props.source.replace(\n      /```[^`\\n]*\\n+[^```]+```\\n+/g,\n      ''\n    );\n\n    const pattOfTitle = /#+\\s([^#\\n]+)\\n*/g;\n    const matchResult = contentWithoutCode.match(pattOfTitle);\n\n    if (!matchResult) {\n      return [];\n    }\n\n    const navData = matchResult.map((r, i) => ({\n      index: i,\n      level: r.match(/^#+/g)[0].length,\n      text: r.replace(pattOfTitle, '$1'),\n    }));\n\n    const levelCount = level => navData.filter(r => r.level === level).length;\n    let startLevel = 1;\n    let startLevelCount = levelCount(startLevel);\n    while (!startLevelCount) {\n      startLevel += 1;\n      startLevelCount = levelCount(startLevel);\n    }\n\n    let listNo = 1;\n    navData.forEach(t => {\n      if (t.level === startLevel) {\n        t.listNo = listNo.toString();\n        listNo += 1;\n      }\n    });\n\n    navData.forEach((t, i) => {\n      if (!t.listNo) {\n        if (navData[i - 1] && t.level === navData[i - 1].level + 1) {\n          t.listNo = `${navData[i - 1].listNo}.1`;\n        } else if (navData[i - 1] && t.level === navData[i - 1].level) {\n          t.listNo = navData[i - 1].listNo.replace(\n            /^(.+\\.)(\\d+)$/g,\n            (w, $1, $2) => `${$1}${parseInt($2, 10) + 1}`\n          );\n        } else {\n          t.listNo = '';\n        }\n      }\n    });\n\n    const result = navData.map(nav => ({\n      ...nav,\n      listNo: nav.listNo.indexOf('.') < 0 ? `${nav.listNo}.` : nav.listNo,\n      text: nav.text.replace(/^(\\d+\\.)+\\s?/g, '').replace(/^\\d+\\.?\\s?/g, ''),\n    }));\n\n    return result;\n  }\n\n  _scrollToTarget(dataId) {\n    if (this.scrollTimeout) {\n      clearTimeout(this.scrollTimeout);\n    }\n\n    // TODO: create one new `scrollTo` method for different browsers.\n    this.scrollTimeout = setTimeout(() => {\n      const target = document.querySelector(`[data-id=\"${dataId}\"]`);\n      window.scrollTo(0, target.offsetTop - this.props.headingTopOffset);\n    }, 1e2);\n  }\n\n  _initheadingsId() {\n    this._getNavStructure().forEach(t => {\n      const headings = document.querySelectorAll(`h${t.level}`);\n      const curheading = Array.prototype.slice\n        .apply(headings)\n        .find(\n          h =>\n            h.innerText\n              .replace(/^(\\d+\\.)+\\s?/g, '')\n              .replace(/^\\d+\\.?\\s?/g, '') === t.text\n        );\n\n      if (curheading) {\n        curheading.dataset.id = this.props.declarative\n          ? t.text\n          : `heading-${t.index}`;\n      }\n\n      const headingId = this.props.declarative\n        ? window.location.hash.replace(/^#/, '').trim()\n        : (window.location.hash.match(/heading-\\d+/g) || [])[0];\n\n      if (headingId && headingId === curheading.dataset.id) {\n        this._scrollToTarget(headingId);\n        this.setState({\n          currentListNo: t.listNo,\n        });\n      }\n    });\n  }\n\n  _getHeadingList() {\n    const headingList = [];\n\n    this._getNavStructure().forEach(t => {\n      const headings = document.querySelectorAll(`h${t.level}`);\n      const curheading = Array.prototype.slice\n        .apply(headings)\n        .find(\n          h =>\n            h.innerText\n              .replace(/^(\\d+\\.)+\\s?/g, '')\n              .replace(/^\\d+\\.?\\s?/g, '') === t.text\n        );\n      if (curheading) {\n        headingList.push({\n          dataId: this.props.declarative ? t.text : `heading-${t.index}`,\n          listNo: t.listNo,\n          offsetTop: curheading.offsetTop,\n        });\n      }\n    });\n\n    return headingList;\n  }\n\n  _winScroll = () => {\n    const scrollTop =\n      window.pageYOffset ||\n      document.documentElement.scrollTop ||\n      document.body.scrollTop ||\n      0;\n\n    const newHeadingList = this._getHeadingList().map(h => ({\n      ...h,\n      distanceToTop: Math.abs(\n        scrollTop + this.props.headingTopOffset - h.offsetTop\n      ),\n    }));\n    const distanceList = newHeadingList.map(h => h.distanceToTop);\n    const minDistance = Math.min(...distanceList);\n    const curHeading = newHeadingList.find(\n      h => h.distanceToTop === minDistance\n    );\n\n    if (this.props.updateHashAuto) {\n      this._updateHash(curHeading.dataId);\n\n      // Hash changing callback\n      this.props.onHashChange(curHeading.dataId);\n    }\n    this.setState({\n      currentListNo: curHeading.listNo,\n    });\n  };\n\n  _updateHash(value) {\n    history.replaceState(\n      {},\n      '',\n      `${window.location.pathname}${window.location.search}#${value}`\n    );\n  }\n\n  render() {\n    const tBlocks = this._getNavStructure().map(t => {\n      const cls = `title-anchor title-level${t.level} ${\n        this.state.currentListNo === t.listNo ? 'active' : ''\n      }`;\n\n      return (\n        <div\n          className={cls}\n          onClick={evt => {\n            // Avoid the trigger of event callback `onNavChange` when clicking current nav item\n            if (t.listNo === this.state.currentListNo) {\n              return;\n            }\n\n            const currentHash = this.props.declarative\n              ? t.text\n              : `heading-${t.index}`;\n\n            this._updateHash(currentHash);\n            this._scrollToTarget(currentHash);\n            this.setState({\n              currentListNo: t.listNo,\n            });\n\n            // Nav changing callback\n            this.props.onNavChange(evt, currentHash);\n\n            // Hash changing callback\n            this.props.onHashChange(currentHash);\n          }}\n          key={`title_anchor_${Math.random()\n            .toString(36)\n            .substring(2)}`}>\n          {this.props.ordered ? <small>{t.listNo}</small> : null}\n          {t.text}\n        </div>\n      );\n    });\n\n    return (\n      <div className={`markdown-navigation ${this.props.className}`}>\n        {tBlocks}\n      </div>\n    );\n  }\n}\n\nexport default MarkdownNavbar;\n"],"file":"index.js"}